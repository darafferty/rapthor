#
#   Parameters
#
NR_STATIONS=50
NR_TIME=2048
NR_CHANNELS=16
NR_POLARIZATIONS=4
GRIDSIZE=512
SUBGRIDSIZE=32
JOBSIZE=200
IMAGESIZE=0.1
W_PLANES=10
CHUNKSIZE=16

PARAMETERS=-DIMAGESIZE=${IMAGESIZE} -DW_PLANES=${W_PLANES} -DNR_STATIONS=${NR_STATIONS} -DNR_TIME=${NR_TIME} -DNR_CHANNELS=${NR_CHANNELS} -DNR_POLARIZATIONS=${NR_POLARIZATIONS} -DGRIDSIZE=${GRIDSIZE} -DSUBGRIDSIZE=${SUBGRIDSIZE} -DJOBSIZE=${JOBSIZE} -DCHUNKSIZE=${CHUNKSIZE}

#
#   Dependencies
#
OPENCL_INC_AMD=/opt/AMDAPP/include
OPENCL_INC_NVIDIA=/usr/local/cuda/include
CLFFT_INC=clFFT/include
CLFFT_LIB=clFFT/lib64

#
#   Rules	
#
IDG-OPENCL: IDG.cpp Kernels.cpp PerformanceCounter.cpp ../Data/Init.cpp ../Lib/uvwsim.c
	g++ -o $@ $^ -std=c++11 -lOpenCL -fopenmp -L${CLFFT_LIB} -lclFFT -I../Common -I../Data -I../Lib -I${OPENCL_INC_AMD} -I${OPENCL_INC_NVIDIA} -I${CLFFT_INC} ${PARAMETERS}

EXEC=IDG-OPENCL
clean:
	@rm -f ${EXEC} *.so */*~ *~ 
