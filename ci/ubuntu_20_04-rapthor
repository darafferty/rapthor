ARG BASE_NAME=rapthor-base
ARG BASE_TAG=latest
ARG VERSION=0.0.0

FROM $BASE_NAME:$BASE_TAG

# Install Rapthor
COPY . /tmp/rapthor

RUN SETUPTOOLS_SCM_PRETEND_VERSION=${VERSION} \
    python3 -m pip install --no-cache-dir --upgrade /tmp/rapthor && \
        rm -rf /tmp/rapthor
